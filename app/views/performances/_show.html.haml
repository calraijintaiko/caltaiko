%article.performance(itemscope itemtype="http://schema.org/Event")
  .performance-image
    = link_to image_tag(performance.banner.url(:display), itemprop: "image"),
      performance.link, target: "_blank"
    %p(itemprop="description")
      = performance.description
      %br
      %br
      = link_to "VIEW EVENT", performance.link

  %section.performance-deets
    %h3.what(itemprop="name")= performance.title
    - if performance.upcoming?
      %p.when
        %time(itemprop="startDate" datetime="#{performance.date.iso8601}")= performance.date.strftime("%A, %B %d, %l:%M%p").upcase
      %p.spacer= "|"
      %p.where(itemprop="location")= performance.location
    - else
      %p.when
        %time(itemprop="startDate" datetime="#{performance.date.iso8601}")= performance.date.strftime("%A, %B %d, %Y, %l:%M%p").upcase
      %p.spacer= "|"
      %p.where(itemprop="location")= performance.location

  %section.edit-icons
    - if performance.images_link.length > 0
      = link_to image_tag("icons/images_black.png"), performance.images_link, target: "_blank"
    - if controller.action_name != "show"
      = link_to image_tag("icons/view_black.png"), performance_path(performance),
        itemprop: "url", title: "Get a shareable link for this performance."
    - if user_signed_in?
      = link_to image_tag("icons/edit_black.png"), edit_performance_path(performance)
      = link_to image_tag("icons/delete_black.png"),
        performance_path(performance), method: :delete,
        data: { confirm: "Are you sure you'd like to delete performance #{performance.title}?" }
